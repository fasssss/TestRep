@model PollesViewModel
<script>var dict = {};</script>
<h1>Polles Page</h1>
<hr>
<h2>Questions</h2>
<form id="downloading-form" method="post" asp-controller="Home" asp-action="InspectingUserFilesInDB"></form>
	<ol>
		@for (int i = 0; i < Model.CurrentQuestions?.Count; i++)
		{
			<li class="border border-dark m-2 p-1" style="border-radius: 0.5em">
				<details>
					<summary>Question @(i+1)</summary>
					<div id="@Model.CurrentQuestions[i].Id">
						<partial name="QuestionPartial"
								 model="new QuestionViewModel { Question = Model.CurrentQuestions[i], User = Model.User, Votes = Model.Votes, VotesTypes = Model.VotesTypes}" />
					</div>
				</details>
			</li>
		}
	</ol>
	<script type="text/javascript">
		const hubConnection = new signalR.HubConnectionBuilder()
			.withUrl("/update")
			.build();

		hubConnection.start();

		hubConnection.on("UpdatePollStatus", function (data) {
			if (data == "Opened") {
				window.location.href = '@Url.Action("OpenedPoll", "Home")?pollId=' + '@Model.PollId';
			}
			else {
				window.location.href = '@Url.Action("PollSummarizing", "Home")?pollId=' + '@Model.PollId';
			}
		});
	</script>